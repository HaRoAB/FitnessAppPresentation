name: Run Azure Login with OIDC

env:
  AZURE_CLIENT_ID: "98886e08-bb0c-4261-a4d7-3db62255587b"
  AZURE_CLIENT_SECRET: "ee350865-19c0-43a0-bc15-8ea1a203dbb0"
  AZURE_TENANT_ID: "f99f0ccd-c0aa-4d82-a8d9-8c5d3e4914b7"
  AZURE_CREDENTIALS: "b071cadb-6c61-4bb8-a70d-9ea95ab1ae42"
  REGISTRY_NAME: "properwhaleacr"
  REGISTRY_URL: "properwhaleacr.azurecr.io"
  RESOURCE_GROUP: "properwhale-rg"
  TAG: "latest"
  IMAGE_NAME: "fitnessapp"

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Install Azure CLI
      run: |
        sudo apt-get update
        sudo apt-get install -y azure-cli

    - name: Azure Login
      uses: azure/login@v1
      with:
        creds: ${{ secrets.AZURE_CREDENTIALS }}
        clientId: ${{ secrets.AZURE_CLIENT_ID }}
        clientSecret: ${{ secrets.AZURE_CLIENT_SECRET }}
        tenantId: ${{ secrets.AZURE_TENANT_ID }}


    - name: Check Azure Login Status
      run: |
        az account show
